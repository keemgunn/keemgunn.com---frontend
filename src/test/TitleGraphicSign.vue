<template>
<div id="title-graphic-sign-wrapper"
@click="mountTrigger()">
  <svg
  class="whole-sign"
  viewBox="0 0 400 200" 
  fill="none"
  version="1.1" 
  xmlns="http://www.w3.org/2000/svg" 
  xmlns:xlink="http://www.w3.org/1999/xlink">
    <g
    id="software"
    class="sign"
    transform="translate(7.000000, 73.000000) rotate(-2)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="8">
      <path d="M45,5.57057262 C27.6923077,1.49871566 13.986,3.8223887 7.96153846,10.6603938 C1.38461538,18.1254649 10.8204231,26.445626 23.5384615,27.9657859 C37.7307692,29.662393 46.0384615,45.271178 30.1153846,50.3609992 C15.0736154,55.1688443 3.80769231,51.039642 0,47.9857493" id="software-0"></path>
      <path d="M69.0725752,9.56084656 C54.066898,12.3369201 46.2230212,22.7471959 45.1999069,32.1164442 C44.1767925,41.4856924 46.9050975,51.2019498 57.4772791,51.548959 C68.0494608,51.8959682 84.4192905,44.6087752 91.9221291,34.5455085 C97.0421344,27.6781966 92.2631672,16.8480396 82.3730618,14.0719661 C72.4829564,11.2958925 67.3673846,14.4189753 67.3673846,14.4189753" id="software-1"></path>
      <path d="M101,12.5608466 C119.576,4.89417989 144,4.56084656 144,4.56084656" id="software-2"></path>
      <path d="M113,10.5608466 C112.038204,17.7275132 95.0464781,47.0767196 99.8554572,53.5608466" id="software-3"></path>
      <path d="M106,31.5608466 C109.895667,29.6836996 128.172229,28.4345584 133,26.5608466" id="software-4"></path>
      <path d="M138,19.5608466 C152.884615,12.8549642 185.423077,10.384376 192,7.56084656" id="software-5"></path>
      <path d="M168,13.5608466 C165.051258,19.542353 157.277772,45.3380511 160.979432,52.5608466" id="software-6"></path>
      <path d="M202.524725,5.64071803 C195.629334,21.5863993 188.044403,44.8116307 190.45779,50.7045999 C192.871177,56.5975691 215.281199,30.5991757 219.073665,17.7733016 C217.694586,32.6790472 222.176591,47.5847927 227.692904,50.0113094 C233.209217,52.4378261 243.552304,27.1327232 247,3.56084656" id="software-7"></path>
      <path d="M244,51.5608466 C251.991525,33.9865222 269.016949,16.7567925 275.966102,0.560846561 C284.305085,25.0270628 279.788136,42.9459817 285,50.5270628" id="software-8"></path>
      <path d="M258,31.5608466 C276.236559,29.3790284 290,23.5608466 290,23.5608466" id="software-9"></path>
      <path d="M308,5.56084656 C307.023256,17.2402359 299.209302,46.7822206 294,50.5608466" id="software-10"></path>
      <path d="M309.501201,8.78852172 C320.62144,1.90047175 334.52174,7.06650923 335.91177,14.6433642 C337.3018,22.2202192 322.01147,34.2743066 308.111171,28.0750617 C294.210872,21.8758167 331.394172,53.5608466 331.394172,53.5608466" id="software-11"></path>
      <path d="M349,10.5608466 C362.737374,8.65175565 383,7.56084656 383,7.56084656" id="software-12"></path>
      <path d="M358.804366,9.56084656 C352.607892,18.5827429 342.968933,38.7085116 345.378673,44.2604478 C347.788412,49.812384 355.878597,53.4676399 365.345088,50.506376 C375.328295,47.3834119 386,42.8724637 386,42.8724637" id="software-13"></path>
      <path d="M352,26.5608466 C359.111111,24.4608466 384,23.5608466 384,23.5608466" id="software-14"></path>
    </g>
    <g 
    id="graphic"
    class="sign"
    transform="translate(10.000000, 69.763808) rotate(-2)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="8">
      <path d="M43,4.23619221 C22.6357591,6.81122341 2.59021478,30.3106737 0.362788327,44.4746542 C-1.86463812,58.6386347 6.40810565,61.5360901 18.4991716,57.673107 C30.5906687,53.8101239 37.2725168,50.2691288 37.2725168,50.2691288" id="graphic-0"></path>
      <path d="M21,35.978883 C32.3060173,33.7787694 59,26.2361922 59,26.2361922 C49.8928715,38.8077222 47.6944084,48.2360502 47.380707,59.2361922" id="graphic-1"></path>
      <path d="M80.9525838,3.23619221 C81.919972,15.9737839 67.7351076,51.9569518 70.3139355,60.2361922" id="graphic-2"></path>
      <path d="M89.8521429,2.48370041 C105.548341,0.883970335 118.682126,7.28289065 119.963333,14.6419092 C121.244974,22.0009278 88.5709358,34.1591365 78,35.1192348 C91.4537604,49.5168055 112.596066,56.2361922 112.596066,56.2361922" id="graphic-3"></path>
      <path d="M123,63.2361922 C133.888889,52.6322067 157.267923,14.5828106 163.032705,0.236192209 C163.672947,23.9393927 166.555556,51.6967598 172,56.3748396" id="graphic-4"></path>
      <path d="M139,39.2361922 C148.459748,37.3162096 174,31.2361922 174,31.2361922" id="graphic-5"></path>
      <path d="M208.946612,2.23619221 C210.170741,12.5820899 189.97759,39.2308075 186,60.2361922" id="graphic-6"></path>
      <path d="M211.905767,4.23619221 C219.365173,5.18150441 240.190594,2.9752064 238.946587,12.7457106 C238.338275,17.5273757 218.122008,33.5468506 206,33.2316041" id="graphic-7"></path>
      <path d="M262,3.23619221 C254.238945,21.6027015 243.19432,46.936321 242,60.2361922" id="graphic-8"></path>
      <path d="M248,38.1161625 C257.958896,33.1484275 282.320544,32.0359568 290.981323,18.5960956 C295.648632,11.3531085 299,3.23619221 299,3.23619221 C299,3.23619221 280.39641,36.836279 278.79224,59.2361922" id="graphic-9"></path>
      <path d="M325,3.23619221 C325,10.6014193 308.80312,45.8260408 306,60.2361922" id="graphic-10"></path>
      <path d="M379,3.23619221 C364.04927,4.83692653 338.283642,17.9634687 330.967364,39.0936825 C326.133965,53.052919 339.237733,67.2673009 374.228683,56.3819604" id="graphic-11"></path>
    </g>
    <g 
    id="system"
    class="sign"
    transform="translate(8.000000, 72.000000) rotate(-3)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="8">
      <path d="M57,5.11727125 C20.6652104,3.18045247 12.3548418,5.31110072 1.53192187,17.7058554 C-6.97236197,27.3899494 22.1674392,30.3711843 34.0006816,32.8127468 C47.1432194,35.5243915 55.389277,40.9068488 54.4874488,47.5319792 C53.3278853,56.0535883 26.2700946,59.1524 15.4471747,58.3775741 C4.62425483,57.6027482 4.4308306,56.2474178 4.04447308,55.4725919" id="system-0"></path>
      <path d="M65.7553856,0.492307692 C61.9057302,19.8724959 73.3598485,33.1109643 86.7348833,32.4700121 C98.8607602,31.8881339 113.296235,22.0045726 126,10.3763612" id="system-1"></path>
      <path d="M93,28.4923077 C91.4245381,35.9565875 87.485633,42.2423493 85.9096708,49.3134571 C84.3342088,56.3850639 85.1216897,59.5279448 85.9096708,61.4923077" id="system-2"></path>
      <path d="M181.221318,15.7053254 C179.291003,6.87022821 165.519428,5.70223314 156.128203,6.87022821 C146.863475,8.02261099 139.914439,10.7118294 137.984124,13.7845249 C133.062973,21.6199471 138.342043,29.2246001 156.51407,32.9920428 C175.044506,36.8331561 181.607185,39.1379216 181.993052,47.2050889 C182.379409,55.2722562 166.551512,58.3454396 159.988833,59.1138574 C153.426154,59.8817873 135.86063,59.3055959 132,58.921631" id="system-3"></path>
      <path d="M191,15.4923077 C202.277445,10.8121614 222.499599,10.8121614 247,6.49230769" id="system-4"></path>
      <path d="M221,11.4923077 C220.101249,20.0143697 211.000125,54.8560331 212.090542,64.4923077" id="system-5"></path>
      <path d="M257,13.4923077 C274.323366,9.74218863 307,7.49230769 307,7.49230769" id="system-6"></path>
      <path d="M269.249631,11.4923077 C263.069574,19.0359723 250.620023,36.7009358 251.008902,50.9098698 C251.397781,65.1183161 261.513566,66.6546543 272.796481,62.4304558 C284.078901,58.2062572 294,53.0217253 294,53.0217253" id="system-7"></path>
      <path d="M255,39.4923077 C262.758417,35.7494159 286.810149,30.1355536 300,30.5101279" id="system-8"></path>
      <path d="M326,6.49230769 C313.726007,47.3623255 312,62.4923077 312,62.4923077" id="system-9"></path>
      <path d="M326,11.4923077 C329.919094,38.3818316 332.662559,52.4111269 342.459298,52.021603 C352.257033,51.6320791 357.742967,46.5657934 368.324123,30.1978698 C378.905775,13.8304411 381.648743,14.6099839 384,11.8818316 C383.60829,28.6392792 381.648743,56.3083459 383.60829,64.4923077" id="system-10"></path>
    </g>
    <g 
    id="interactive"
    class="sign"
    transform="translate(7.000000, 80.274565) rotate(-2)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="7">
      <path d="M19,0.725434609 C17.4646442,11.3876863 5.79594023,27.2287459 3.33937097,33.6260969 C0.882801707,40.0234479 -1.2666964,42.4605339 0.882801707,46.7254346" id="interactive-0"></path>
      <path d="M34,3.72543461 C29.5301587,10.6447894 20.9097506,34.5480153 23.4639456,42.7254346" id="interactive-1"></path>
      <path d="M31,6.72543461 C36.5642048,25.5048694 43.9831446,38.0244926 57.5845341,41.467389 C66.5490863,43.658323 69.3311887,31.4516904 69.9494337,21.7489824 C70.5676786,12.0462745 65.3125963,7.35141577 65.3125963,7.35141577" id="interactive-2"></path>
      <path d="M62,16.7254346 C72.7058824,15.1778156 114,3.72543461 114,3.72543461" id="interactive-3"></path>
      <path d="M98,8.72543461 C95.156151,15.9129346 89.1524698,28.1004346 90.1004195,38.7254346" id="interactive-4"></path>
      <path d="M123,4.54239096 C129.769231,6.58478183 139.923077,5.76782548 147,3.72543461" id="interactive-5"></path>
      <path d="M133.375193,4.72543461 C126.218373,9.0734368 117.816888,18.3905844 114.394061,34.2297352 C110.971234,50.068886 130.885864,39.1988806 133.997525,37.6460226 C137.109186,36.0931647 148,30.5028762 148,30.5028762" id="interactive-6"></path>
      <path d="M122,25.7254346 C128.651163,23.3254346 148,19.7254346 148,19.7254346" id="interactive-7"></path>
      <path d="M165,3.72543461 C159.75,12.1758163 151,39.0918468 151,44.7254346" id="interactive-8"></path>
      <path d="M159.552239,5.87332193 C168.189055,-0.485832996 182.069652,3.14796982 182.686567,10.4155755 C183.303483,17.6831811 166.338308,29.4930402 154,27.3733219 C168.80597,35.2465614 182.069652,40.0916318 184.537313,43.7254346 C199.343284,24.6479698 214.149254,6.47895574 216,0.725434609 C211.373134,24.3451529 211.681592,36.1550121 216,43.4226177" id="interactive-9"></path>
      <path d="M199,28.7254346 C205.527027,26.8306978 222,22.7254346 222,22.7254346" id="interactive-10"></path>
      <path d="M257.944484,8.72543461 C241.75025,11.5253325 228.917083,23.9693233 227.389325,29.2580194 C225.861567,34.5467155 228.917083,38.2799127 235.028115,37.6577132 C241.139146,37.0355136 261,28.3247201 261,28.3247201" id="interactive-11"></path>
      <path d="M262,11.7254346 C275.815789,7.39210128 297,5.72543461 297,5.72543461" id="interactive-12"></path>
      <path d="M281,6.72543461 C276.70785,17.9070622 267.739179,39.7876933 272.223514,40.7254346" id="interactive-13"></path>
      <path d="M314,4.72543461 C311.527273,12.11005 299.163636,31.8023577 297,40.7254346" id="interactive-14"></path>
      <path d="M324.897872,5.72543461 C324.585681,17.7473431 321.463771,35.0095708 323.961299,38.4003655 C326.458826,41.7911602 345.814664,17.7473431 348,8.49972119" id="interactive-15"></path>
      <path d="M359,7.72543461 C365.348837,4.72543461 385,3.72543461 385,3.72543461" id="interactive-16"></path>
      <path d="M362.838415,5.72543461 C358.988218,12.2447798 349.137231,31.210826 350.060761,39.2947145 C350.984291,47.378603 373.456856,39.6056333 383,32.1435823" id="interactive-17"></path>
      <path d="M359,21.7254346 C370.793103,18.5825775 386,17.7254346 386,17.7254346" id="interactive-18"></path>
    </g>
    <g 
    id="motion"
    class="sign"
    transform="translate(9.000000, 82.000000) rotate(-3)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="8">
      <path d="M22,1.76494681 C17.0689517,14.2093521 2.65524149,34.0430082 0,50.7649468" id="motion-0"></path>
      <path d="M22.2180765,3.76494681 C21.1082536,25.6999896 24.1823899,40.0612292 32.6367722,42.0021368 C41.0911546,43.9426343 54.1573503,28.8052777 62.6117326,21.8189946 C71.0661149,14.8323016 80.8897117,9.37857284 82.5950394,10.563043 C88.743718,14.8323016 72.603386,40.8377562 74.5246705,49.7649468" id="motion-1"></path>
      <path d="M121.035356,7.00841021 C107.458174,13.3403837 98.1236571,23.4717858 96.4260999,32.7583273 C94.7293617,42.0452761 98.1236571,50.910202 106.184802,49.6437258 C114.246765,48.3772496 137.583058,38.2462549 144.371649,28.1148528 C151.160239,17.9838581 150.736055,7.85245609 141.401538,3.63141197 C132.067021,-0.590039499 119.338208,1.09845962 119.338208,1.09845962" id="motion-2"></path>
      <path d="M162,11.6328234 C169.378882,12.979974 197.254658,3.54991961 228,4.89707024" id="motion-3"></path>
      <path d="M197.735462,8.76494681 C199.945436,20.8861589 187.569581,39.4720175 188.011575,48.7649468" id="motion-4"></path>
      <path d="M246,3.76494681 C244.424242,13.950132 235.757576,43.6908727 233,47.7649468" id="motion-5"></path>
      <path d="M283.783099,7.76494681 C270.357344,13.383618 261,27.8316295 261,40.6743064 C261,53.5169833 279.714688,42.6809746 285.817304,38.6676381 C291.91992,34.6543016 308.193562,23.4169593 305.752515,15.3902862 C303.311469,7.36361316 278.494165,12.9822843 278.494165,12.9822843" id="motion-6"></path>
      <path d="M330,6.76494681 C324.484848,14.472494 317.787879,36.7838147 317,49.7649468" id="motion-7"></path>
      <path d="M330,12.5853168 C336.186668,35.0174769 348.147559,48.2364284 359.696006,46.6341312 C371.244452,45.0318341 381.555565,35.8186255 381.96801,18.5939311 C382.380454,8.9801482 378.668454,9.78129678 378.668454,9.78129678" id="motion-8"></path>
    </g>
    <g 
    id="ux"
    class="sign"
    transform="translate(100.000000, 45.000000) rotate(2)" 
    stroke-linecap="round"
    stroke-linejoin="round"
    stroke-width="8">
      <path d="M9.8235614,3.04581542 C2.51923583,29.1873614 -7.65509098,77.0260979 9.04092088,91.9266879 C25.7374117,106.827278 51.3039881,81.7315473 68,2" id="ux-0"></path>
      <path d="M143,0 C143,0 89.608246,49.4628099 62,95" id="ux-1"></path>
      <path d="M80,0 C80,0 115.337839,87.8686919 135,96" id="ux-2"></path>
    </g>
  </svg>
</div>
</template>



<script>
import{ mapState, mapGetters, mapMutations} from 'vuex';
import { randomInt } from '../../assets/javascripts/uiAction';
import anime from 'animejs';
import { Timeline, keys } from '../../assets/javascripts/circleAnime';


export default {
  name: "TitleGraphicSign",
  data() { return {
    amounts: {
      software: 15,
      graphic: 12,
      system: 11,
      interactive: 19,
      motion: 9,
      ux: 3,
    },
    names: [],
    mounted: '',
    SoftwareAnimation: null,
    GraphicAnimation: null,
    SystemAnimation: null,
    InteractiveAnimation: null,
    MotionAnimation: null,
    UxAnimation: null,
    SoftwareFadeOut: null,
    GraphicFadeOut: null,
    SystemFadeOut: null,
    InteractiveFadeOut: null,
    MotionFadeOut: null,
    UxFadeOut: null,
  }},
  computed: {
    ...mapState(['displayTiming']),
    ...mapGetters([
      'VIEWTYPE'
    ]),
    namesCounter: function(){
      return this.names.length
    },
    startReq: function(){
      return this.displayTiming.titleGraphicStart;
    }
  },
  watch: {
    namesCounter(nu, old){
      if(nu === 1){
        console.log('sadfasdfasdf');
        this.refreshNamesArr();
      }
      return old
    },
    startReq(nu, old){
      if(nu){
        this.mountTrigger();
      }
      return old
    }
  },
  methods: {
    ...mapMutations([]),
    refreshNamesArr(){
      console.log('refresh names array');
      const arr = ['software', 'graphic', 'system', 'interactive', 'motion', 'ux'];
      let result = [];
      for(var i=0; i<6; i++){
        let now = randomInt(0, arr.length);
        let str = arr[now];
        result.push(str);
        arr.splice(now, 1);
      }
      this.names = result;
    },
    mountTrigger(){
      console.log(this.names);
      let newEl = this.names.pop();
      console.log(newEl);
      this.mounted = newEl;
      setTimeout(this.animationStart, 100);
      this.displayTiming.titleGraphicStart = false;
    },
    animationStart(){
      if(this.mounted === 'software' ){
        this.SoftwareAnimation.play();
      }
      else if(this.mounted === 'graphic'){
        this.GraphicAnimation.play();
      }
      else if(this.mounted === 'system'){
        this.SystemAnimation.play();
      }
      else if(this.mounted === 'interactive'){
        this.InteractiveAnimation.play();
      }
      else if(this.mounted === 'motion'){
        this.MotionAnimation.play();
      }
      else{
        this.UxAnimation.play();
      }
    }
  },
  created() {
    this.refreshNamesArr();
  },
  mounted() {
    const uxEl = document.querySelector('#ux');
    if((this.VIEWTYPE === 'small') || (this.VIEWTYPE === 'narrow')){
      uxEl.setAttribute("transform","translate(80.000000, 40.000000) rotate(2)")
    }

    const strokeKeys = [
      keys('#ffffff', 0, 1, 0, "easeOutExpo"),
      // keys('#cecece', 1, 600, 0, "easeOutExpo"),
    ]

    const SDO = [{
      value: [anime.setDashoffset, 0], 
      delay: 30,
      duration: 200,
      endDelay: 30,
      direction: 'normal',
      easing: "linear",
    }]

    const strokeFadeOut = [
      // keys('#ffffff', 0, 1, 0, "easeOutExpo"),
      keys('rgba(255, 255, 255, 0)', 3000, 800, 0, "easeInQuint"),
    ];

    this.SoftwareAnimation = Timeline(anime);
    this.GraphicAnimation = Timeline(anime);
    this.SystemAnimation = Timeline(anime);
    this.InteractiveAnimation = Timeline(anime);
    this.MotionAnimation = Timeline(anime);
    this.UxAnimation = Timeline(anime);
    this.SoftwareFadeOut = Timeline(anime);
    this.GraphicFadeOut = Timeline(anime);
    this.SystemFadeOut = Timeline(anime);
    this.InteractiveFadeOut = Timeline(anime);
    this.MotionFadeOut = Timeline(anime);
    this.UxFadeOut = Timeline(anime);

    function assignValues(
      name, i,
      SoftwareAnimation,
      GraphicAnimation,
      SystemAnimation,
      InteractiveAnimation,
      MotionAnimation,
      UxAnimation,
      SoftwareFadeOut,
      GraphicFadeOut,
      SystemFadeOut,
      InteractiveFadeOut,
      MotionFadeOut,
      UxFadeOut
    ){
      let el = '#' + name + '-' + i;
      let bigEl = '#' + name + ' path';
      if(name === 'software' ){
        SoftwareFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        SoftwareAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        SoftwareAnimation.finished.then(()=>{
          SoftwareFadeOut.play();
        })
      }
      else if(name === 'graphic'){
        GraphicFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        GraphicAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        GraphicAnimation.finished.then(()=>{
          GraphicFadeOut.play();
        })
      }
      else if(name === 'system'){
        SystemFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        SystemAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        SystemAnimation.finished.then(()=>{
          SystemFadeOut.play();
        })
      }
      else if(name === 'interactive'){
        InteractiveFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        InteractiveAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        InteractiveAnimation.finished.then(()=>{
          InteractiveFadeOut.play();
        })
      }
      else if(name === 'motion'){
        MotionFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        MotionAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        MotionAnimation.finished.then(()=>{
          MotionFadeOut.play();
        })
      }
      else{
        UxFadeOut.add({ 
          targets: bigEl,
          stroke: strokeFadeOut
        });
        UxAnimation.add({ 
          targets: el,
          stroke: strokeKeys,
          strokeDashoffset: SDO,
        });
        UxAnimation.finished.then(()=>{
          UxFadeOut.play();
        })
      }
    }

    for(var i=0; i<this.names.length; i++){
      for(var j=0; j<this.amounts[this.names[i]]; j++){
        assignValues(
          this.names[i], j,
          this.SoftwareAnimation,
          this.GraphicAnimation,
          this.SystemAnimation,
          this.InteractiveAnimation,
          this.MotionAnimation,
          this.UxAnimation,
          this.SoftwareFadeOut,
          this.GraphicFadeOut,
          this.SystemFadeOut,
          this.InteractiveFadeOut,
          this.MotionFadeOut,
          this.UxFadeOut,
        );
      }
    }
  }
}
</script>



<style lang="scss" scoped> 
#title-graphic-sign-wrapper{
  position: relative; top: 0; left: 0;
  width: 100%; height: 100%;
}
.whole-sign{
  position: relative; top: 0; left: 0;
  width: 100%; height: 100%;
}
.sign{
  // stroke: rgba(255, 255, 255, 0);
  stroke: #ffffff;
}




</style>